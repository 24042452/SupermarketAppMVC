<!DOCTYPE html>
<html>
<head>
  <title>Order Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container mt-4">
      <h2>Order Details</h2>
      <br>

      <table class="table">
          <thead>
              <tr>
                  <th>Product</th>
                  <th>Image</th>
                  <th>Quantity</th>
                  <th>Price Each</th>
                  <th>Total</th>
              </tr>
          </thead>
          <tbody>
              <% let grandTotal = 0; %>
              <% for (let i = 0; i < order.length; i++) { %>
                  <% let lineTotal = order[i].quantity * order[i].price_each; %>
                  <% grandTotal = grandTotal + lineTotal; %>
                  <tr>
                      <td><%= order[i].productName %></td>
                      <td><img src="/images/<%= order[i].image %>" width="80"></td>
                      <td><%= order[i].quantity %></td>
                      <td>$<%= order[i].price_each %></td>
                      <td>$<%= lineTotal %></td>
                  </tr>
              <% } %>
          </tbody>
      </table>

      <h4>Total: $<%= grandTotal %></h4>

  </div>
</body>
</html>
